var TB_version="3.3.15",TB_rateLimitData,TB_tmp,TB_mode="widget",TB_started=false,TB_tweetsToCache=new Object(),TB_allSources=new Array(),jQnc=jQuery,TB_sourceCounts=new Array(),TB_sourceNames=new Array(),TB_seenTweets=new Array();function TB_start(){if(TB_started){return}else{TB_started=true}if(typeof(TB_config)=="undefined"){TB_showMessage(null,"noconf",TB_labels.no_config,true);return}TB_config.widgets=new Object();jQuery.each(jQuery("form.tb-widget-configuration"),function(d,g){var b=g.id,e,c,a=false,f=jQuery(g).next();if(f.length>0){if(typeof(f.attr("id"))!="undefined"&&f.attr("id")!=""){if(f.attr("id").indexOf("-mc")>0){e=b.substr(0,b.length-2)}else{a=true;e=b}}else{a=true;e=b}}else{a=true;e=b}TB_config.widgets[e]=new Object;jQuery.each(jQuery("#"+b).find("input"),function(h,i){TB_config.widgets[e][i.name]=i.value});if(typeof(TB_config.widgets[e].sources)!="undefined"){TB_allSources=TB_allSources.concat(TB_config.widgets[e].sources.split(","))}if(a){c='<div id="'+e+'-mc"><div class="tb_header"><img class="tb_twitterlogo" src="'+TB_pluginPath+'/img/twitter-logo.png" alt="'+TB_labels.twitter_logo+'" /><div class="tb_tools" style="background-image:url('+TB_pluginPath+'/img/bg_sm.png)"><a class="tb_infolink" href="http://kirill-novitchenko.com" title="'+TB_labels.kino+'" style="background-image:url('+TB_pluginPath+'/img/info-kino.png)"> </a><a class="tb_refreshlink" href="javascript:TB_blend(\''+e+'\');" title="'+TB_labels.refresh+'"><img src="'+TB_pluginPath+'/img/ajax-refresh-icon.gif" alt="'+TB_labels.refresh+'" /></a></div></div>';if(TB_config.general_seo_tweets_googleoff){tweetHTML+='<!--googleoff: index--><div class="tb_tweetlist"></div><!--googleon: index-->'}else{c+='<div class="tb_tweetlist"></div>'}c+='<div class="tb_footer">';if(!TB_config.archive_is_disabled){if(typeof(TB_config.widgets[e].viewMoreText)=="undefined"){TB_config.widgets[e].viewMoreText=TB_labels.view_more+" &raquo;"}if(TB_config.widgets[e].viewMoreUrl){c+='<a class="tb_archivelink" href="'+TB_config.widgets[e].viewMoreUrl+'">'+TB_config.widgets[e].viewMoreText+"</a>"}else{if(TB_config.default_view_more_url){c+='<a class="tb_archivelink" href="'+TB_config.default_view_more_url+'">'+TB_config.widgets[e].viewMoreText+"</a>"}}}c+="</div></div>";jQuery("#"+g.id).after(c)}});if(TB_getObjectSize(TB_config.widgets)<1){return}TB_allSources=TB_getUniqueElements(TB_allSources);jQuery("div.tb_tools").css("background-image","url("+TB_pluginPath+"/img/bg.png)").width(56);jQuery("a.tb_infolink").css("display","inline").css("margin-right","11px");if(typeof(jQuery.toJSON)=="undefined"&&typeof(jQnc.toJSON)=="function"){jQuery.toJSON=jQnc.toJSON}if(typeof(jQuery.jsonp)=="undefined"&&typeof(jQnc.jsonp)=="function"){jQuery.jsonp=jQnc.jsonp}if(!TB_config.default_view_more_url){jQuery("a.defaultUrl").hide()}if(typeof(TB_config)!="undefined"){if(TB_config.advanced_reroute_on){TB_config.rate_limit_url={url:TB_pluginPath+"/ws.php?action=rate_limit_status",dtype:"json"}}else{TB_config.rate_limit_url={url:"http://twitter.com/account/rate_limit_status.json",dtype:"jsonp"}}for(widgetId in TB_config.widgets){if(typeof(TB_config.widgets[widgetId].sources)=="undefined"||TB_config.widgets[widgetId].sources==""){TB_showMessage(widgetId,"nosrc",TB_labels.no_sources,true)}else{TB_initInfoBox(widgetId);TB_makeAjaxURLs(widgetId);TB_config.widgets[widgetId]["minTweetId"]=0;TB_config.widgets[widgetId]["maxTweetId"]=0;if(jQuery("#"+widgetId+"-mc > div.tb_tweetlist > div.tb_tweet").size()>0){if(TB_tmp=jQuery("#"+widgetId+"-mc > div.tb_tweetlist > div:last").attr("id")){TB_config.widgets[widgetId]["minTweetId"]=TB_tmp}if(TB_tmp=jQuery("#"+widgetId+"-mc > div.tb_tweetlist > div:first").attr("id")){TB_config.widgets[widgetId]["maxTweetId"]=TB_tmp}}TB_config.widgets[widgetId]["tweetsShown"]=jQuery("#"+widgetId+"-mc > div.tb_tweetlist").children("div").size();jQuery.each(jQuery("#"+widgetId+"-mc > div.tb_tweetlist").children("div"),function(a,b){TB_wireMouseOver(b.id)});jQuery("a.tb_photo, .tb_author a, .tb_msg a, .tweet-tools a, .tb_infolink").click(function(){this.target="_blank"});if(parseInt(TB_config.widgets[widgetId].refreshRate)>1){setInterval("TB_blend('"+widgetId+"');",parseInt(TB_config.widgets[widgetId].refreshRate)*1000)}if(parseInt(TB_config.widgets[widgetId].refreshRate)==1||TB_config.widgets[widgetId].tweetsShown<TB_config.widgets[widgetId].tweetsNum){TB_blend(widgetId)}}}}else{TB_showMessage(null,"noconf",TB_labels.no_global_config,true);jQuery("a.tb_refreshlink").remove();jQuery("div.tb_tools").css("background-image","url("+TB_pluginPath+"/img/bg_sm.png)").width(28)}}function TB_makeAjaxURLs(f){var h=new Array(),g=new Array(),b=new Array(),c="",a="",e,d;TB_config.widgets[f]["ajaxURLs"]=new Array();jQuery.each(TB_config.widgets[f].sources.split(","),function(j,k){k=jQuery.trim(k);if(k.charAt(0)=="!"){if((e=k.indexOf(":"))>0){c=k.substr(2,e-1);TB_sourceNames[c.toLowerCase()]=k.substr(e+1);k=k.substr(1,e-1)}else{c=k.substr(2)}if(TB_config.widgets[f].favoritesOnly){TB_addAjaxUrl(f,"favorites",{screen_name:c},k,1,null)}else{if(TB_config.advanced_no_search_api){TB_addAjaxUrl(f,"user_timeline",{screen_name:c},k,1,null)}else{TB_addAjaxUrl(f,"search",{from:c},k,1,null)}}}else{if(k.charAt(0)=="@"&&k.indexOf("/")==-1){if(TB_config.widgets[f].favoritesOnly){if((e=k.indexOf(":"))>0){c=k.substr(1,e-1);TB_sourceNames[c.toLowerCase()]=k.substr(e+1);k=k.substr(0,e)}else{c=k.substr(1)}TB_addAjaxUrl(f,"favorites",{screen_name:c},k,0,null)}else{if((d=k.indexOf("|"))>1){if((e=k.indexOf(":"))>0){c=k.substr(1,d-1);a=k.substr(d+1,(e-d-1));TB_sourceNames[c.toLowerCase()]=k.substr(e+1);k=k.substr(0,e)}else{c=k.substr(1,d-1);a=k.substr(d+1)}if(a.charAt(0)=="#"){TB_addAjaxUrl(f,"search",{from:c,tag:a.substr(1)},k,0,a)}else{TB_addAjaxUrl(f,"search",{from:c,ors:a},k,0,a)}}else{if((e=k.indexOf(":"))>0){c=k.substr(1,e-1);TB_sourceNames[c.toLowerCase()]=k.substr(e+1);k=k.substr(0,e)}else{c=k.substr(1)}if(TB_config.advanced_no_search_api){TB_addAjaxUrl(f,"user_timeline",{screen_name:c},k,0,null)}else{if(escape(g.join(" OR ")).length+k.length>140){TB_addAjaxUrl(f,"search",{q:g.join(" OR ")},escape("@"+b.join(",@")),0,null);b=new Array();g=new Array()}b.push(c);if(TB_config.filter_hide_mentions){g.push("from:"+c)}else{g.push(k+" OR from:"+c)}}}}}else{if(k.charAt(0)=="@"&&k.indexOf("/")>1){if((d=k.indexOf("|"))>1){TB_addAjaxUrl(f,"list_timeline",{user:k.substr(1,k.indexOf("/")-1),list:k.substr(k.indexOf("/")+1,d-k.indexOf("/")-1)},k,0,k.substr(d+1))}else{TB_addAjaxUrl(f,"list_timeline",{user:k.substr(1,k.indexOf("/")-1),list:k.substr(k.indexOf("/")+1)},k,0,null)}}else{if(k!=""){if(k.indexOf(" ")>0){if(k.charAt(0)!='"'){k='"'+k+'"'}}if(h.join(" OR ").length+k.length>140){TB_addAjaxUrl(f,"search",{q:h.join(" OR ")},h.join(","),0,null);h=new Array()}h.push(k)}}}}});if(h.length>0){TB_addAjaxUrl(f,"search",{q:h.join(" OR ")},h.join(","),0,null)}if(b.length>0){TB_addAjaxUrl(f,"search",{q:g.join(" OR ")},encodeURI("@"+b.join(",@")),0,null)}}function TB_addAjaxUrl(f,e,b,g,d,a){var c;if(typeof(TB_config.filter_lang)!="undefined"&&TB_config.filter_lang.length==2){b.lang=TB_config.filter_lang}else{b.lang="all"}if(d){b.is_private=1}if(e=="search"&&(TB_config.advanced_reroute_on||TB_config.reached_api_limit||d)){b.action=e;TB_config.widgets[f]["ajaxURLs"].push({url:TB_pluginPath+"/ws.php",data:b,source:g,privateSrc:d,dtype:"json",modifier:a})}else{if(e=="search"){b.rpp=TB_config.widgets[f]["tweetsNum"]*2;TB_config.widgets[f]["ajaxURLs"].push({url:"http://search.twitter.com/search.json",data:b,source:g,privateSrc:0,dtype:"jsonp",modifier:a})}else{if(e=="list_timeline"&&(TB_config.advanced_reroute_on||TB_config.reached_api_limit)){b.action=e;delete b.user;delete b.list;delete b.nots;delete b.lang;TB_config.widgets[f]["ajaxURLs"].push({url:TB_pluginPath+"/ws.php",data:b,source:g,privateSrc:0,dtype:"json",modifier:a})}else{if(e=="list_timeline"){c="http://api.twitter.com/1/"+b.user+"/lists/"+b.list+"/statuses.json";delete b.user;delete b.list;delete b.nots;delete b.lang;b.per_page=TB_config.widgets[f]["tweetsNum"]*2;TB_config.widgets[f]["ajaxURLs"].push({url:c,data:b,source:g,privateSrc:0,dtype:"jsonp",modifier:a})}else{if(e=="user_timeline"&&(TB_config.advanced_reroute_on||TB_config.reached_api_limit||d)){b.action=e;TB_config.widgets[f]["ajaxURLs"].push({url:TB_pluginPath+"/ws.php",data:b,source:g,privateSrc:0,dtype:"json",modifier:a})}else{if(e=="user_timeline"){TB_config.widgets[f]["ajaxURLs"].push({data:b,url:"http://api.twitter.com/1/statuses/user_timeline.json",source:g,privateSrc:0,dtype:"jsonp",modifier:a})}else{if(e=="favorites"&&(TB_config.advanced_reroute_on||TB_config.reached_api_limit||d)){b.action=e;TB_config.widgets[f]["ajaxURLs"].push({data:b,url:TB_pluginPath+"/ws.php",source:g,privateSrc:0,dtype:"json",modifier:a})}else{if(e=="favorites"){TB_config.widgets[f]["ajaxURLs"].push({data:{},url:"http://api.twitter.com/1/favorites/"+b.screen_name+".json",source:g,privateSrc:0,dtype:"jsonp",modifier:a})}}}}}}}}}function TB_initInfoBox(a){TB_config.widgets[a].sourcesHTML="";TB_config.widgets[a].sourcesCount=0;jQuery.each(TB_config.widgets[a].sources.split(","),function(b,c){if(c.charAt(0)=="!"){c=c.substr(1)}if((colonPos=c.indexOf(":"))>0){c=c.substr(0,colonPos)}if((pipePos=c.indexOf("|"))>0){c=c.substr(0,pipePos)}TB_config.widgets[a].sourcesHTML+='<a href="';if(c.charAt(0)=="@"){TB_config.widgets[a].sourcesHTML+="http://twitter.com/"+c.substr(1)}else{TB_config.widgets[a].sourcesHTML+="http://search.twitter.com/search?q="+escape(c)}TB_config.widgets[a].sourcesHTML+='">'+c+"</a> ";TB_config.widgets[a].sourcesCount++});jQuery("#"+a+"-mc").children("div.tb_header").children("img.tb_twitterlogo").click(function(){TB_showMessage(a,"info",TB_labels.version_msg.format(TB_version,TB_config.widgets[a].sourcesHTML),false)})}function TB_blend(a){TB_showLoader(a);if(!TB_config.advanced_reroute_on&&!TB_config.reached_api_limit){jQuery.ajax({url:TB_config.rate_limit_url.url,dataType:TB_config.rate_limit_url.dtype,success:function(d){if(d.error||d.remaining_hits<TB_config.widgets[a].ajaxURLs.length){TB_config.reached_api_limit=true;if(!TB_config.advanced_disable_cache){var e=1000*60*5,c=new Date(),b;if(d.reset_time){b=TB_str2date(d.reset_time);e=Math.round(b.getTime()-c.getTime())}setTimeout("TB_config.reached_api_limit=false;TB_makeAjaxURLs('"+a+"');TB_blend('"+a+"');",e);TB_makeAjaxURLs(a);TB_getTweets(a)}else{if(TB_config.advanced_show_limit_msg){TB_showMessage(a,"limit",TB_labels.limit_msg+". "+TB_labels.limit_reset.format(TB_verbalTime(TB_str2date(d.reset_time))),false)}}}else{TB_getTweets(a)}},error:function(){TB_getTweets(a)}})}else{TB_getTweets(a)}}function TB_checkComplete(a){if(TB_config.widgets[a].urlsDone==TB_config.widgets[a].ajaxURLs.length){TB_hideLoader(a);if(jQuery("#"+a+"-mc > div.tb_tweetlist").children("div").size()==0){TB_showMessage(a,"notweets",TB_labels.no_tweets_msg.format(TB_config.widgets[a].sourcesHTML),true)}else{TB_hideMessage(a,"notweets");if((typeof(TB_config.advanced_disable_cache)!="undefined"&&!TB_config.advanced_disable_cache)){TB_cacheNewTweets()}}}}function TB_getTweets(a){TB_config.widgets[a]["urlsDone"]=0;jQuery.each(TB_config.widgets[a].ajaxURLs,function(c,b){if(b.dtype=="jsonp"&&typeof(jQuery.jsonp)!="undefined"){jQuery.jsonp({data:b.data,callbackParameter:"callback",url:b.url,timeout:2000,success:function(d){if(d.error){if(d.error.indexOf("Rate limit exceeded")==0){TB_config.reached_api_limit=true}TB_config.widgets[a].urlsDone++;TB_checkComplete(a)}else{TB_addTweets(a,d,b)}},error:function(d,f,e){TB_config.widgets[a].urlsDone++;TB_checkComplete(a)}})}else{jQuery.ajax({data:b.data,dataType:b.dtype,url:b.url,timeout:2000,success:function(d){if(d.error){if(d.error.indexOf("Rate limit exceeded")==0){TB_config.reached_api_limit=true}TB_config.widgets[a].urlsDone++;TB_checkComplete(a)}else{TB_addTweets(a,d,b)}},error:function(d,f,e){TB_config.widgets[a].urlsDone++;TB_checkComplete(a)}})}})}function TB_cacheNewTweets(){if(TB_getObjectSize(TB_tweetsToCache)>0){if(typeof(jQuery.toJSON)=="undefined"&&typeof(jQnc.toJSON)=="function"){jQuery.toJSON=jQnc.toJSON}jQuery.ajax({url:TB_pluginPath+"/ws.php?action=cache_data",type:"POST",dataType:"json",data:({tweets:jQuery.toJSON(TB_tweetsToCache)}),success:function(a){if(!a.error){TB_tweetsToCache=new Object()}}})}}function TB_addTweets(e,d,a){var g=d,f=false,c,b;if(typeof(d.results)!="undefined"){g=d.results}jQuery.each(g,function(k,h){c=new TB_tweet(h);c.modifier=a.modifier;if(!c.isOKtoShow()){return true}c.selectRelevantSources(a.source);f=false;b=false;jQuery("div.tb_tweet").each(function(){if(c.isSameId(this.id)){b=true}});if(b){return true}if(TB_config.widgets[e].tweetsShown==0){TB_config.widgets[e].tweetsShown++;TB_config.widgets[e].minTweetId=c.divId;TB_config.widgets[e].maxTweetId=c.divId;jQuery("#"+e+"-mc > div.tb_tweetlist").append(c.getHTML());f=true}else{if(c.isOlderThan(TB_config.widgets[e].minTweetId)){if(TB_config.widgets[e].tweetsShown>=TB_config.widgets[e].tweetsNum){return false}else{TB_config.widgets[e].tweetsShown++;jQuery("#"+e+"-mc > div.tb_tweetlist").append(c.getHTML());TB_config.widgets[e].minTweetId=c.divId;if(TB_config.widgets[e].tweetsNum==1){TB_config.widgets[e].maxTweetId=c.divId}f=true}}else{if(c.isNewerThan(TB_config.widgets[e].maxTweetId)){TB_enforceLimit(e);jQuery("#"+e+"-mc > div.tb_tweetlist").prepend(c.getHTML());TB_config.widgets[e].tweetsShown++;TB_config.widgets[e].maxTweetId=c.divId;if(TB_config.widgets[e].tweetsNum==1){TB_config.widgets[e].minTweetId=c.divId}f=true}else{TB_enforceLimit(e);var j=TB_config.widgets[e].maxTweetId,l;jQuery("#"+e+"-mc > div.tb_tweetlist > div.tb_tweet").each(function(m,n){l=n.id;if(c.isOlderThan(j)&&c.isNewerThan(l)){jQuery("#"+j).after(c.getHTML());TB_config.widgets[e].tweetsShown++;return false}j=l});if(jQuery("#"+c.divId).length<=0){jQuery("#"+TB_config.widgets[e].minTweetId).after(c.getHTML());TB_config.widgets[e].minTweetId=c.divId;if(TB_config.widgets[e].tweetsNum==1){TB_config.widgets[e].maxTweetId=c.divId}TB_config.widgets[e].tweetsShown++}f=true}}}if(f&&(typeof(TB_config.advanced_disable_cache)!="undefined"&&!TB_config.advanced_disable_cache)){TB_tweetsToCache[c.divId]={s:c.sources,p:a.privateSrc,t:c.jsonCode}}TB_wireMouseOver(c.divId);if(TB_config.filter_hide_same_text){TB_seenTweets.push(c.jsonCode.text)}});TB_config.widgets[e].urlsDone++;jQuery("a.tb_photo, .tb_author a, .tb_msg a, .tweet-tools a, .tb_infolink").click(function(){this.target="_blank"});TB_checkComplete(e)}function TB_wireMouseOver(a){if(TB_config[TB_mode+"_show_reply_link"]||TB_config[TB_mode+"_show_follow_link"]){jQuery("#"+a).hover(function(){jQuery(this).find("div:last").slideDown()},function(){jQuery(this).find("div:last").slideUp()})}}function TB_enforceLimit(b){if(TB_config.widgets[b].tweetsShown==TB_config.widgets[b].tweetsNum){var a=jQuery("#"+TB_config.widgets[b].minTweetId),c=a.prev("div.tb_tweet");a.remove();TB_config.widgets[b].tweetsShown--;delete TB_tweetsToCache[TB_config.widgets[b].minTweetId];if(TB_config.widgets[b].tweetsShown==0){TB_config.widgets[b].minTweetId=0;TB_config.widgets[b].maxTweetId=0;return}else{if(c.length>0){TB_config.widgets[b].minTweetId=c.attr("id")}}}}function TB_showLoader(a){if(TB_config.widgets[a].tweetsShown==0){TB_showMessage(a,"loading",TB_labels.loading_msg,true)}jQuery("#"+a+"-mc > div.tb_header > div.tb_tools > a.tb_refreshlink > img").attr("src",TB_pluginPath+"/img/ajax-refresh.gif");jQuery("#"+a+"-mc > div.tb_header > div.tb_tools > a.tb_refreshlink").addClass("loading")}function TB_hideLoader(a){TB_hideMessage(a,"loading");jQuery("#"+a+"-mc > div.tb_header > div.tb_tools > a.tb_refreshlink > img").attr("src",TB_pluginPath+"/img/ajax-refresh-icon.gif");jQuery("#"+a+"-mc > div.tb_header > div.tb_tools > a.tb_refreshlink").removeClass("loading")}function TB_showMessage(b,a,d,c){if(!b){jQuery("div.tb_tweetlist").before('<div id="msg_'+a+'" class="tb_msg" style="display:none;">'+d+"</div>");return}if(!jQuery("#"+b+"-mc").children("#msg_"+a).length){jQuery("#"+b+"-mc").children("div.tb_tweetlist").before('<div id="msg_'+a+'" class="tb_msg" style="display:none;">'+d+"</div>");jQuery("#"+b+"-mc").children("#msg_"+a).slideDown();if(!c){setTimeout('TB_hideMessage("'+b+'","'+a+'")',8000)}}else{if(jQuery("#"+b+"-mc").children("#msg_"+a).is(":hidden")){jQuery("#"+b+"-mc").children("#msg_"+a).slideDown()}}}function TB_hideAllMessages(){jQuery("div.tb_msg").slideUp(1000,function(){jQuery("div.tb_msg").remove()})}function TB_hideMessage(b,a){jQuery("#"+b+"-mc").children("#msg_"+a).slideUp(1000,function(){jQuery("#"+b+"-mc").children("#msg_"+a).remove()})}function TB_tweet(a){this.jsonCode=a;this.tweetDate=TB_str2date(a.created_at);if(typeof(a.from_user)!="undefined"){this.screenName=a.from_user}else{if(typeof(a.user.screen_name)!="undefined"){this.screenName=a.user.screen_name}}this.id=a.id_str;this.sources="";this.selectRelevantSources=function(f){var e=new Array(),d="@"+this.screenName,c=this.jsonCode;jQuery.each(f.split(","),function(g,h){if(d==h||c.text.indexOf(h)>0){e.push(h)}});if(e.length>0){this.sources=e.join(",")}else{this.sources=f}};var b;if(TB_config.custom_template){b=TB_config.custom_template}else{b='<div id="{0}" class="tb_tweet">';if(TB_config.widget_show_photos){b+='<a class="tb_photo" rel="nofollow" href="http://twitter.com/{1}"><img src="{2}" alt="{1}"></a>'}if(TB_config.widget_show_user){b+='<span class="tb_author"><a rel="nofollow" href="http://twitter.com/{1}">{1}</a>: </span> '}b+='<span class="tb_msg">{3}</span><br />';if(!TB_config.general_seo_tweets_googleoff&&TB_config.general_seo_footer_googleoff){b+="<!--googleoff: index-->"}b+=' <span class="tb_tweet-info">';b+='<a rel="nofollow" href="http://twitter.com/{1}/statuses/{4}">{5}</a>';if(TB_config.widget_show_source&&a.source){b+=" "+TB_labels.from+" {6}"}b+="</span>";if(!TB_config.general_seo_tweets_googleoff&&TB_config.general_seo_footer_googleoff){b+="<!--googleon: index-->"}if(TB_config.widget_show_follow_link||TB_config.widget_show_reply_link){b+='<div class="tweet-tools" style="display:none;">';if(TB_config.widget_show_reply_link){b+='<a rel="nofollow" href="http://twitter.com/home?status=@{1}%20&in_reply_to_status_id={4}&in_reply_to={1}">'+TB_labels.reply+"</a>"}if(TB_config.widget_show_follow_link&&TB_config.widget_show_reply_link){b+=" | "}if(TB_config.widget_show_follow_link){b+='<a rel="nofollow" href="http://twitter.com/{1}">'+TB_labels.follow+" {1}</a>"}b+="</div>"}b+="</div>\n"}getDivId=function(c,d,e){return"t-"+c.getTime()+"-"+d+"-"+e};this.divId=getDivId(this.tweetDate,this.screenName,this.id);this.getHTML=function(){var g=this.jsonCode.text,f,e="",d="",c="";if(typeof(TB_sourceNames[this.screenName.toLowerCase()])!="undefined"){f=TB_sourceNames[this.screenName.toLowerCase()]}else{f=this.screenName}if(TB_config.general_link_urls){g=g.replace(/(https?:\/\/\S+)/gi,'<a rel="nofollow" href="$1">$1</a>')}if(TB_config.general_link_screen_names){g=g.replace(/\@([\w]+)/gi,'<a rel="nofollow" href="http://twitter.com/$1">@$1</a>')}if(TB_config.general_link_hash_tags){g=g.replace(/\#(\S+)/gi,'<a rel="nofollow" href="http://search.twitter.com/search?q=%23$1">#$1</a>')}if(a.profile_image_url){e=a.profile_image_url}else{e=a.user.profile_image_url}if(TB_config.general_timestamp_format){if(typeof(jQuery.PHPDate)!="undefined"){d+=jQuery.PHPDate(TB_config.general_timestamp_format,this.tweetDate)}else{if(typeof(jQnc.PHPDate)!="undefined"){d+=jQnc.PHPDate(TB_config.general_timestamp_format,this.tweetDate)}}}else{d+=TB_verbalTime(this.tweetDate)}if(a.source.indexOf("&lt;")>=0){c+=jQuery("<textarea/>").html(a.source).val()}else{c+=a.source}return b.format(this.divId,f,e,g,a.id_str,d,c)};this.isNewerThan=function(f){var g,e,d,c;if(typeof(f)=="undefined"){return true}else{if(f.indexOf("-")<=0){return true}else{g=f.split("-");d=g[1];c=g[2];e=this.tweetDate.getTime()}}if(e>d){return true}else{if(e<d){return false}else{if(this.screenName!=c){return true}else{return false}}}};this.isOlderThan=function(c){return !this.isNewerThan(c)};this.isSameId=function(d){var c,e;if(typeof(d)=="undefined"){return false}else{if(d.indexOf("-")<=0){return flase}else{c=d.split("-");e=this.divId.split("-");if(c.length==3||e.length==3){return(c[1]==e[1]&&c[2]==e[2])}else{return(c[1]==e[1]&&c[2]==e[2]&&c[3]==e[3])}}}};this.isOKtoShow=function(){var c;if(this.modifier){if(this.modifier.length>0&&this.jsonCode.text.indexOf(this.modifier)<0){return false}}if(TB_config.filter_hide_same_text){if(jQuery.inArray(this.jsonCode.text,TB_seenTweets)>0){return false}}if(this.jsonCode.in_reply_to_user_id||this.jsonCode.to_user_id){if(TB_config.filter_hide_replies){return false}}else{if(TB_config.filter_hide_not_replies){return false}}if(typeof(TB_config.filter_bad_strings)!="undefined"&&TB_config.filter_bad_strings.length>0){badStrings=TB_config.filter_bad_strings.base64_decode().split(",");for(c=0;c<badStrings.length;c++){if(this.jsonCode.text.indexOf(badStrings[c])>=0||this.screenName.indexOf(badStrings[c])>=0){return false}}}if(TB_config.filter_limit_per_source>0){if(typeof(TB_sourceCounts[this.screenName])!="undefined"||TB_sourceCounts[this.screenName]==0){if(TB_sourceCounts[this.screenName]>=TB_config.filter_limit_per_source){return false}else{TB_sourceCounts[this.screenName]++}}else{TB_sourceCounts[this.screenName]=1;if(TB_config.widget_limit_per_source_time>0){setTimeout('TB_sourceCounts["'+this.screenName+'"]=0',TB_config.widget_limit_per_source_time*1000)}}}return true}}TB_addLoadEvent(TB_start);jQuery(document).ready(TB_start);